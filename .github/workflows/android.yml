name: Android

on:
  push:
    paths:
      - "VirtualGamePad-Mobile/**"
      - "VGP_Data_Exchange/**"
      - "scripts/build_android.sh"
      - "scripts/sync_data_exchange.sh"
      - ".github/workflows/android.yml"
  pull_request:
    paths:
      - "VirtualGamePad-Mobile/**"
      - "VGP_Data_Exchange/**"
      - "scripts/build_android.sh"
      - "scripts/sync_data_exchange.sh"
      - ".github/workflows/android.yml"
  workflow_dispatch:

jobs:
  build-android:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Java 17
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: "17"

      - name: Setup Android SDK
        uses: android-actions/setup-android@v3

      - name: Build Android app
        env:
          ANDROID_SDK_ROOT: ${{ env.ANDROID_HOME }}
          ANDROID_HOME: ${{ env.ANDROID_HOME }}
        run: ./scripts/build_android.sh
